# reviewer-assignment-service
<div align="center"> Сервис, который назначает ревьюеров на PR из команды автора, позволяет выполнять переназначение ревьюверов и получать список PR’ов, назначенных конкретному пользователю, а также управлять командами и активностью пользователей</div>

![а это забавные котики](images/funnyCatsForREADME.jpg)

## Комментарии к коду и обоснование изменений требований

<div style="font-style: italic; color: #FF4BD680;">
Очень надеюсь, что не будет звучать грубо или слишком дотошно, просто в ридми к тестовому просили описать, где возникли сомнения, а также причины, по которым было принято то или иное решение, поэтому я подумала, что просто немного адаптировать будет как минимум некрасиво, как максимум значительно усложнит проверку и введет в ступор проверяющих
</div>

Обращу внимание сразу, что я отошла от требований в openapi.yml (https://github.com/avito-tech/tech-internship/blob/main/Tech%20Internships/Backend/Backend-trainee-assignment-autumn-2025/openapi.yml)

**Исходные требования:** `string` для идентификаторов  
**Мое решение:** `int` с автоинкрементом

Мне показалось неуместным использование `string` для `id`, поэтому в работе я заменила на `int` по ряду причин:

* `id` - уникальный идентификатор, который можно использовать в качестве `primary key` в базе данных 
* так или иначе нам необходим автоинрементирующийся атрибут для связи таблиц друг с другом - тогда этот атрибут с уникальным `id` в формате `string` вместе будут излишними
* если не использовать `int` для `id` (который будет генерироваться при добавлении объекта в базу - просто инкриминируется и тогда гарантированно мы получаем уникальный идентификатор), то все еще не стоит использовать `string` - поскольку тогда придется проходиться по всей базе и проверять на уникальность, либо создавать свою хеш-мапу, чтобы за o(1) проверять его уникальность, а затем продумывать способ обработки коллизий, в то время как есть готовое решение - `uuid`

Немного резюмируя, использование `string` мне кажется неправильным, лучше всего использовать `uuid`, но это влечет за собой громоздкие трудно читаемые конструкции в коде, а `int` - компромиссное решение, корректно работает, гарантирует уникальные значения, не мешает при проверке:)

То же самое, но более наглядно!

| Проблема | Решение | Преимущество |
|----------|---------|--------------|
| Необходимость уникального primary key | `int` с автоинкрементом | Гарантированная уникальность |
| Избыточность string ID + автоинкремент | Единый идентификатор | Упрощение структуры БД |
| Сложность проверки уникальности string | Готовая система инкремента | Эффективность O(1) |

---

И небольшая заметка! Для реализации репозиториев я использовала бибилиотеку `github.com/Masterminds/squirrel` (подробнее можно почитать вот тут: https://github.com/Masterminds/squirrel)

Она позволяет генерировать SQL-запросы в Go с использованием методов цепочки, что делает код значительно более читаемым! 

В конструкторе репозиториев я использовала `squirrel.StatementBuilder.PlaceholderFormat(squirrel.Dollar)` для генерации SQL-запросов с использованием `$` - поскольку до этого выбрала PostgreSQL в качестве БД, в которой через дефолтный `?` обращение к параметрам запроса не поддерживается


Возможно, у вас возникнет несколько вопросов, поэтому немного моих комментариев к коду!

1) почему при составлении мемберов (`[]Members`) команды я джоиню таблицу юзеров (`users`) и таблицу тимов (`teams`)?
2) зачем тогда нужна таблица мемберов (`team_members`)?

        1) один юзер может быть в 1 команде, название команды уникально -> когда мы джоиним мы получаем информацию о юзерах, которые находятся в той или иной команде, а мембер - тот же юзер, но не содержит почту юзера и хранит информацию об айди команды
   
        2) таблица мемберов нужна для более легкого поиска активных юзеров в команде при назначении ревьювера

---


## Подробная инструкция к запуску приложения и примеры использования!

*Команда для запуска приложения*

```bash
docker compose up --build
```

*При необходимости можно остановить контейнеры и удалить вольюмы*

```bash
docker compose down -v
```
---

<div align="center" style="font-style: italic; color: #FF4BD680;">
✨Спасибо большое, что прочитали и просмотрели мою работу! И за само задание, разумеется, тоже! Было очень интересно! :) ✨
</div>



<div style="font-style: italic; color: #FF4BD680;">
И милая картинка для восстановления настроения и сил!!
</div>

![Теплая добрая картинка](images/meow.jpg)